<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feedback</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .star {
      cursor: pointer;
      font-size: 2rem;
      color: gray;
      transition: color 0.2s;
    }
    .star.selected {
      color: gold;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans min-h-screen flex items-center justify-center p-4">

  <div class="bg-white shadow-lg rounded-2xl p-8 w-full max-w-xl">
    <!-- LOGO -->
    <div class="text-center mb-6">
      <img src="logo.jpg" alt="Mentormindz Logo" class="mx-auto h-10 mb-2" />
      <h2 class="text-2xl font-bold text-gray-800">We'd Love Your Feedback</h2>
      <p class="text-gray-500 text-sm">Help us improve by sharing your thoughts</p>
    </div>

    <!-- Feedback Form -->
    <form id="feedback-form" onsubmit="submitFeedback(event)" class="space-y-4">
      <input type="text" id="name" placeholder="Your Name" required class="w-full p-3 border border-gray-300 rounded-xl" />
      <input type="email" id="email" placeholder="Your Email" required class="w-full p-3 border border-gray-300 rounded-xl" />

      <!-- Star Rating -->
      <div class="text-center">
        <label class="block mb-2 font-medium text-gray-700">Rate Us</label>
        <div id="stars" class="flex justify-center gap-2 flex-row-reverse">
          <span class="star" data-value="1">&#9733;</span>
          <span class="star" data-value="2">&#9733;</span>
          <span class="star" data-value="3">&#9733;</span>
          <span class="star" data-value="4">&#9733;</span>
          <span class="star" data-value="5">&#9733;</span>
        </div>
        <input type="hidden" id="rating" name="rating" required />
      </div>

      <textarea id="message" rows="5" placeholder="Your Feedback..." required class="w-full p-3 border border-gray-300 rounded-xl"></textarea>

      <button type="submit" class="bg-blue-600 text-white font-semibold py-3 px-6 rounded-xl w-full hover:bg-blue-700 transition duration-200">Submit Feedback</button>
    </form>
  </div>

<script>
  const stars = document.querySelectorAll('.star');
  const ratingInput = document.getElementById('rating');

  function highlightStars(value) {
    stars.forEach(star => {
      const starValue = parseInt(star.dataset.value);
      star.classList.toggle('selected', starValue >= value); // reverse logic
    });
  }

  stars.forEach(star => {
    star.addEventListener('mouseover', () => {
      const hoverValue = parseInt(star.dataset.value);
      highlightStars(hoverValue);
    });

    star.addEventListener('click', () => {
      const selected = parseInt(star.dataset.value);
      ratingInput.value = selected;
      highlightStars(selected);
    });
  });

  document.getElementById('stars').addEventListener('mouseleave', () => {
    const selectedRating = parseInt(ratingInput.value);
    if (selectedRating) {
      highlightStars(selectedRating);
    } else {
      stars.forEach(s => s.classList.remove('selected'));
    }
  });

  async function submitFeedback(e) {
    e.preventDefault();
    const name = document.getElementById('name').value;
    const email = document.getElementById('email').value;
    const rating = document.getElementById('rating').value;
    const message = document.getElementById('message').value;

    if (!rating) {
      alert("Please select a star rating.");
      return;
    }

    const data = { name, email, rating, message };

    try {
      const response = await fetch("https://script.google.com/macros/s/AKfycbxjYjCoIz8sxAwSFh6rRU-9tEOCcwOFbDEmSbaLbQ-cVNaBnZuKGPbvfVplz38goHHPkg/exec", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(data)
      });

      const result = await response.text();
      alert("✅ Thank you for your feedback!");

      document.getElementById("feedback-form").reset();
      ratingInput.value = '';
      stars.forEach(star => star.classList.remove('selected'));
    } catch (err) {
      console.error(err);
      alert("❌ Submission failed. Please try again.");
    }
  }
</script>

</body>
</html>